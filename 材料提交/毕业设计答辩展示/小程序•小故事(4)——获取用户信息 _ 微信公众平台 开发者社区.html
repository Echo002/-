<!DOCTYPE html>
<!-- saved from url=(0119)https://developers.weixin.qq.com/blogdetail?action=get_post_info&lang=zh_CN&token=&docid=000c2424654c40bd9c960e71e5b009 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="baidu-site-verification" content="NBNudAVdvA">
<meta name="google-site-verification" content="u_9F5q9UrNxwO0uNw5V949s1JTovxX8x_O5f2ZIOlds">
<meta name="renderer" content="webkit">


<meta name="keywords" content="小程序开发者社区,小程序开发者论坛,小程序开发">
<script type="text/javascript">
    
    window._points=[+new Date()];

    
    function wx_main(mod){
        window._points&&(window._points[3]=+new Date());
    };

    window.wx={
    	uin:"",
    	data : {
    		user_name:""
    	}
    };
</script>

<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/jserr3dccb1.js"></script>
<title>小程序•小故事(4)——获取用户信息 | 微信公众平台 开发者社区</title>
<link href="https://res.wx.qq.com/wxopenforumres/htmledition/images/favicon318d1d.ico" rel="Shortcut Icon">
<link rel="stylesheet" type="text/css" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/base3dccb1.css">
<link rel="stylesheet" type="text/css" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/lib3ca8db.css">
<link rel="stylesheet" type="text/css" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/layout_head3ca8db.css">



		
<link rel="stylesheet" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/common3dccb1.css" media="all">
<link rel="stylesheet" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/detail3e0af8.css" media="all">
<link rel="stylesheet" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/page_error3ca8db.css" media="all">
<style>.emoji{width:1.5em;height:1.5em;display:inline-block;margin-bottom:-.25em;background-size:contain}</style>
<link rel="stylesheet" type="text/css" href="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/pagination3ca8db.css">

    <style></style></head>
    <body class="zh_CN screen_small">
    	<div class="head" id="header">
			<script type="text/javascript">
    
    window._points&&(window._points[1]=+new Date());
</script>
<div class="head_box js_head_box">
    <h1 class="logo"><a href="https://developers.weixin.qq.com/home?" title="微信公众平台 小程序"></a></h1>
    <div class="header_ctrls js_header_ctrls">
        <ul class="header_ctrls_meta top_nav">
            
        </ul>

        
        <div style="" class="js_search_header_box header_ctrls_meta top_search_box">
            <a href="javascript:;" class="js_search_btn search_switch">
                <i class="icon20_common search_gray"></i>
            </a>
            <span class="js_input_box search_input_box active">
                <input type="text" class="js_input" placeholder="搜索你要的内容">
                <a href="javascript:;" class="js_clear icon12_common close_gray" style="display:none;"></a>
            </span>
            <div class="js_result_box search_result_box skin_pop" style="display: none;">
                <div class="skin_pop_inner search_box_inner">
                    <div style="display:none;" class="js_empty empty_box">
                        没有找到相关内容
                    </div>
                    <div style="display:none;" class="js_result results_box">
                        
                        <div class="js_article_frame post_box">
                            <div class="box_title">搜索结果</div>
                            <div class="js_article_list related_posts_wrp">
                                <script id="search_article_tpl" type="text/html">
                                {each list as item index}
                                <p class="related_posts_item">
                                    <span>{=item._blogCategory}</span>
                                    <a target="_blank" href="{=_url('/blogdetail?action=get_post_info&docid='+item.docid+'&highline='+item.highline)}" data-id="{=item.docid}" class="js_article_item rel_post_title" title="{=item.blog.title.replace(/<em>/g,'').replace(/<\/em>/g,'')}">{=item.blog.title}</a><span class="tips_global">{=item.ext.commented_total||0}条评论</span>
                                </p>
                                {/each}
                                </script>
                            </div>
                        </div>
                        <div class="skin_pop_ft ">
                            <a href="javascript:;" target="_blank" class="js_check">查看全部搜索内容</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="header_ctrls_meta">
            <a href="https://developers.weixin.qq.com/">社区</a>
        </div>

        <div class="header_ctrls_meta">
            <a href="https://developers.weixin.qq.com/miniprogram/dev/index.html">文档</a>
        </div>

        
                
                <div class="header_ctrls_meta">
            <a class="js_redirect_to_loginpage hd_login_link" href="https://developers.weixin.qq.com/weloginpage">登录</a>
        </div>
            </div>
   
</div>

		</div>
        <div id="body" class="body page_simple page_detail" style="min-height: 482px;">
            <div class="container_box"><div id="articleApp" class="post_detail mod_default_box"><div class="post_overview"><div class="post_overview_opr"><!----> <!----></div> <div class="post_overview_main"><h4 class="post_title"><i class="icon_post_tag top" style="display: none;">置顶</i>
            小程序•小故事(4)——获取用户信息
            <i class="icon_post_tag official" style="">官方</i> <i class="icon_post_tag featured" style="display: none;">精选</i> <i class="icon_post_tag hot" style="display: none;">热门</i> <span class="checking_state"></span></h4> <div class="post_info"><span data-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE" data-author="Ltt" class="post_owner post_info_meta">微信团队</span> <em id="create_time" class="post_time post_info_meta">04月12日</em> <span class="post_discuss_num post_info_meta"><i class="icon_post_opr read"></i><span>13252</span></span> <span class="js_comment_num_frame post_discuss_num post_info_meta" style="display: none;"><i class="icon_post_opr discuss"></i><span id="comment_num">0</span></span></div></div></div> <div id="content" class="post_content"><p><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">背景</span></strong><br></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">我们发现大部分小程序都会使用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">接口，来获取用户信息。原本设计这个接口时，我们希望开发者在真正需要用户信息的情况下才去调取这个接口，但很多开发者会直接调用这个接口，导致用户在使用小程序的时候产生困扰，</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">归结起来有几点：</span></p><ul class=" list-paddingleft-2" style=" padding-left: 2.2em; max-width: 100%; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">开发者在小程序首页直接调用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">进行授权，弹框获取用户信息，会使得一部分用户点击“拒绝”按钮。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在开发者没有处理用户拒绝弹框的情况下，用户必须授权头像昵称等信息才能继续使用小程序，会导致某些用户放弃使用该小程序。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">用户没有很好的方式重新授权，尽管我们增加了</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">设置</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">页面，可以让用户选择重新授权，但很多用户并不知道可以这么操作。</span></p></li></ul><ul class=" list-paddingleft-2" style="list-style-type: none;"><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></li></ul><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">此外，我们发现开发者默认将</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 绑定使用，这个是由于我们一开始的设计缺陷和实例代码导致的（</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">必须通过</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在后台生成</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">后才能调用）。同时，我们收到开发者的反馈，希望用户进入小程序首页便能获取到用户的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，以便识别到用户是否以前关注了同主体公众号或</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">使用过同主体的App 。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为了解决以上问题，针对获取用户信息我们更新了三个能力：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.使用组件来获取用户信息</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.若用户满足一定条件，则可以</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">用</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取到的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">直接换到</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">3.</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不需要依赖</span><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 就能调用得到数据</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">获取用户信息组件介绍</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">组件变化：</span></p><ul class=" list-paddingleft-2" style=" padding-left: 2.2em; max-width: 100%; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">open-type </code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">属性增加</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：用户点击时候会</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">触</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">发</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 事件。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">新增事件</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：当 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">open-type</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 时，用户点击会触发。可以从事件返回参数的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">detail</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 字段中获取到和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 返回参数相同的数据。</span></p></li></ul><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">示例：</span></p><pre style="max-width: 100%; line-height: 25.6px; widows: 1; unicode-bidi: embed; white-space: pre-wrap; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><code class="" style="margin-right: 4px; margin-bottom: 16px; padding: 14px; max-width: 100%; word-wrap: break-word; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-radius: 3px; font-size: 14px; font-family: Consolas, Monaco, monospace; display: block; white-space: pre; overflow-x: auto; color: rgb(248, 248, 242); background: rgb(35, 36, 31); box-sizing: border-box !important; border-left-style: none !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&lt;</span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">button</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">open-type</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">=</span><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;">"getUserInfo"</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">=</span><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;">"userInfoHandler"</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&gt;</span></span> Click me <span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">button</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&gt;</span></span></span></code></pre><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不同之处在于：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.API</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">只会弹一次框，用户拒绝授权之后，再次调用将不会弹框；</span></p><p style="margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">组件 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">由于是用户主动触发，不受弹框次数限制，只要用户没有授权，都会再次弹框。</span></p><p><br></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">通过获取用户信息的组件，就可以</span><strong style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">解决用户再次授权</strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">的问题。</span></p><h3 style=" margin-top: 1.1em; margin-bottom: 1.3em; font-weight: bolder; font-size: 19px; max-width: 100% ; ; ; ; ; ; ; ; ; ; ; ; "><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">直接获取unionId</span></strong></h3><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">开发者申请</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">userinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 授权主要为了获取 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，我们鼓励开发者在不骚扰用户的情况下合理获得</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，而仅在必要时才向用户弹窗申请使用昵称头像。为此，凡使用“获取用户信息组件”获取用户昵称头像的小程序，在满足以下全部条件时，将可以静默获得</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.在微信开放平台下存在同主体的App、公众号、小程序。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.用户关注了某个相同主体公众号，或曾经在某个相同主体App、公众号上进行过微信登录授权。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">这样可让其他同主体的<span style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">App、公众号、小程序的开发者<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">快速获得已有用户的数据</strong>。</span></span></span></p><h3 style=" margin-top: 1.1em; margin-bottom: 1.3em; font-weight: bolder; font-size: 19px; max-width: 100% ; ; ; ; ; ; ; ; ; ; ; ; "><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">不依赖登</span></strong><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">录的用户信息获取</span></strong></h3><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">某些工具类的轻量小程序不需要登录行为，但是也想获取用户信息，那么就可以在 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 的时候加一个参数</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">withCredentials: false</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 直接获取到用户信息，可以少一次网络请求。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; font-size: 15px; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">这样可以在不给用户弹窗授权的情况下<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">直接展示用户的信息</strong>。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">最佳实践</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.调用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，然后从微信后端换取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，用于解密 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">返回的敏感数据。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.使用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getSetting</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取用户的授权情况</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> &nbsp;1) 如果用户已经授权，直接调用 API</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取用户最新的信息；</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> &nbsp;2) 用户未授权，在界面中显示一个按钮提示用户登入，当用户点击并授权后就获取到用户的最新信息。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">3.获取到用户数据后可以进行展示或者发送给自己的后端。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; color: rgb(68, 68, 68); font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">One More Thing</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">除了获取用户方案介绍之外，再聊一聊很多初次接触微信小程序的开发者所不容易理解的一些概念：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.关于OpenId和UnionId</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">OpenId</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">是一个用户对于一个小程序／公众号的标识，开发者可以通过这个标识识别出用户。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">UnionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是一个用户对于同主体微信小程序／公众号／APP的标识，开发者需要在微信开放平台下绑定相同账号的主体。开发者可通过</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">UnionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，实现多个小程序、公众号、甚至APP 之间的数据互通了。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">同一个用户的这两个 ID 对于同一个小程序来说是永久不变的，就算用户删了小程序，下次用户进入小程序，开发者依旧可以通过后台的记录标识出来。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">2.关于 getUserInfo 和 login</span></strong></span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">很多开发者会把</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 捆绑调用当成登录使用，其实 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 已经可以完成登录，</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 只是获取额外的用户信息。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 后，会发送到开发者后端，开发者后端通过接口去微信后端换取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">sessionKey</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">（现在会将 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 也一并返回）后，把自定义登录态 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">3rd_session</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">返回给前端，就已经完成登录行为了。而 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 行为是静默，不必授权的，用户不会察觉。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 只是为了提供更优质的服务而存在，比如展示头像昵称，判断性别，开发者可通过</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和其他公众号上已有的用户画像结合来提供历史数据。因此开发者不必在用户刚刚进入小程序的时候就强制要求授权。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">可以在官方的文档中看到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 的最佳实践：</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><img style="" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/640"><br></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">Q &amp; A</strong></span></span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q1: </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为什么 login 的时候不直接返回 openid，而是要用这么复杂的方式来经过后台好几层处理之后才能拿到？</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为了防止坏人在网络链路上做手脚，所以小程序端请求开发者服务器的的请求都需要二次验证才是可信的。因为我们采取了小程序端只给</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> ，由服务器端拿着 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></strong><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">AppSecrect</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 去微信服务器请求的方式，才会给到开发者对应的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和用于加解密的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key。</code></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q2: </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">既然用户的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是永远不变的，那么开发者可以使用</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 作为用户的登录态么？</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">行，这是非常危险的行为。因为 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是不变的，如果有坏人拿着别人的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 来进行请求，那么就会出现冒充的情况。所以我们建议开发者可以自己在后台生成一个拥有有效期的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">第三方session</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">来做登录态，用户每隔一段时间都需要进行更新以保障数据的安全性。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q3:</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是不是用户每次打开小程序都需要重新</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">？</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不必，可以将登录态存入</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">storage</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">中，用户再次登录就可以拿</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">storage</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">里的登录态做正常的业务请求，只有当登录态过期了之后才需要重新</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 。这样子做一则可以减少用户等待时间，二则可以减少网络带宽。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">目前微信的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 有效期是三天，所以建议开发者设置的登录态有效期要小于这个值。</span></p><p><br></p></div> <div class="post_extra_info"><div class="js_updatetime post_tips">最后一次编辑于&nbsp;&nbsp;<span id="update_time">05月14日</span>&nbsp;&nbsp;（未经腾讯允许，不得转载）</div> <div class="post_opr"><a data-component-identifier="post-comment-link" id="comment_btn" class="post_opr_meta" style="cursor: pointer;"><i class="icon_post_opr discuss"></i>评论 56</a></div></div> <div class="post_comment_area"><ul class="post_comment_list"><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw_JfShYG-pFocHgwF7HXn-s&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0" alt="唐衡" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">唐衡</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000a6e5d6a8ff061ab965ebc6564" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>好功能！ 错过的用户可以有机会再使用我们的小程序！【赞】 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 1
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 3</a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月12日</span></span></div> <div class="post_comment_reply_area"><div class="post_comment_area"><ul class="post_comment_list"><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUswxH5jOB-5532hXoPxFERxgE&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(1)" alt="罗艺娜" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">罗艺娜</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000a28b6eacd28173ac62fe1b564" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">好个毛线</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 5
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月15日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6KjHfyytWYrGG9YIJRThas&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(2)" alt="阿庆" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">阿庆</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000c86f5930178b9c4c6cdff9518" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">好个锤子</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 5
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月22日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUswwNeMffEcLF5GtR6smeELjw&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(3)" alt="Sultan" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">Sultan</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000eee6ccb4eb8dbc6d6a8cb9564" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>一点都不好用 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">星期一 14:55</span></span></div> <!----></li></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r">回复</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor" style="display: none;"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479308_537" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUswwUCmMdjZ_xhPKqdGMMx44s&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(5)" alt="啷嘞个啷" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">啷嘞个啷</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_0006428664c028b1b796a4d4b514" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p><span style=" color: rgb(102, 102, 102); ; ; ; ; ; ; ; ; ; ; ;  ; ">这样可以在不给用户弹窗授权的情况下 </span><strong style="color: rgb(102, 102, 102);">直接展示用户的信息 </strong><span style=" color: rgb(102, 102, 102); ; ; ; ; ; ; ; ; ; ; ;  ; ">。 </span></p><p><span style=" color: rgb(102, 102, 102); ; ; ; ; ; ; ; ; ; ; ;  ; "><br></span></p><p><font color="#666666" face="-apple-system-font, system-ui, Helvetica Neue, PingFang SC, Hiragino Sans GB, Microsoft YaHei UI, Microsoft YaHei, Arial, sans-serif"><span style="font-size: 15px;">这里写错了，只要获取用户信息都会出现授权弹窗 </span></font></p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 2
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 4</a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月13日</span></span></div> <div class="post_comment_reply_area"><div class="post_comment_area"><ul class="post_comment_list"><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw_U6qYNUothYtyEcw8rFKzQ&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(6)" alt="hello, world" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">hello, world</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_00060cc15984f87621c69de05564" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">写了 withCredentials: false之后，  wx.getUserInfo  也是报错的，，什么原因</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月14日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUswwUCmMdjZ_xhPKqdGMMx44s&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(5)" alt="啷嘞个啷" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">啷嘞个啷</strong></a> <!----> <span class="reply-comment"><span class="relpy-tips">回复</span> <a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw_U6qYNUothYtyEcw8rFKzQ&amp;lang=zh_CN" data-component-identifier="replybox__reply_nick_name" class="post_comment_owner_nickname">hello, world</a></span> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_0004a6c3b98fe8d535c684d035c8" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">报的什么错？未授权？</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月15日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUswz751SvRmS0J4nbk0DNprkE&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(7)" alt="　　　　　　　　王文彬" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">　　　　　　　　王文彬</strong></a> <!----> <span class="reply-comment"><span class="relpy-tips">回复</span> <a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw_U6qYNUothYtyEcw8rFKzQ&amp;lang=zh_CN" data-component-identifier="replybox__reply_nick_name" class="post_comment_owner_nickname">hello, world</a></span> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000262edfc0978e938c63fd9e554" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">刚刚还能弹出信息，码的过了一会就不行，这垃圾玩意儿原生</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 1
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月15日</span></span></div> <!----></li></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r">回复</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor" style="display: none;"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479329_830" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw5Bz0jQKTpXXSrmjjsjcVIc&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(8)" alt="live" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">live</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000e6aa8c00fd8a2f196af83856c" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>呵呵，刚发出来就立马审核不通过，你们有这么怕被吐槽，被反馈吗？ <img data-type="png" style="" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/640(1)"><br></p><p><br></p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 10
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 8</a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月16日</span></span></div> <div class="post_comment_reply_area"><div class="post_comment_area"><ul class="post_comment_list"><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw5ag-P03fgiCrGi5fvSD3YE&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(9)" alt="Ltt" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">Ltt</strong></a> <span class="checking_state"><i class="icon_post_tag official">官方</i> <!----></span> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_00020468f08580e52bc6676c8560" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">你好，您的评论未通过审核是因命中了关键词，并非内容问题，这里还请不要误会。</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月14日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw5Bz0jQKTpXXSrmjjsjcVIc&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(8)" alt="live" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">live</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000864238acb188538c609e1b518" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">请问命中了哪个关键词？<br>通篇看下来，没感觉哪个词是敏感词。</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月15日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6unaouEG2d89JBuv-rsRtE&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(10)" alt="Benz" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">Benz</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_0006e28d258f088d40c63fcc5514" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">刚刚测试了，关键词是：被cao（作）</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 1
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月16日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw5Bz0jQKTpXXSrmjjsjcVIc&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(8)" alt="live" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">live</strong></a> <!----> <span class="reply-comment"><span class="relpy-tips">回复</span> <a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6unaouEG2d89JBuv-rsRtE&amp;lang=zh_CN" data-component-identifier="replybox__reply_nick_name" class="post_comment_owner_nickname">Benz</a></span> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000266971ec9e80d42c65b2435b4" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">无语了</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月16日</span></span></div> <!----></li><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw9Jd44Rc1iJOPABQ8vQAx7c&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(11)" alt="山月丶" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">山月丶</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000ea6d6648df08404d65e7365b4" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">支持支持，说的太对了，说出了开发者的心声，这样随便就更改这么重要的功能，又没个说法，小程序太乱了，生怕什么时候又无声无息的删除了什么功能。</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 1
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月25日</span></span></div> <!----></li></ul> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="l">更多评论</a></div> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r">回复</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor" style="display: none;"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479344_920" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw1DQKpCtnxuhq_62SasQrNI&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(12)" alt="风吹の泪、、、" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">风吹の泪、、、</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_00004aa4e70170770aa671e915b4" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>666 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月17日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479353_34" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6WRGsifDqf5GpMlXkelBIk&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(13)" alt="昊天 Haotian" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">昊天 Haotian</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_0006ac48824b68134da6dbbb656c" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>这个改动很让人难受 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 2
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月20日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479361_962" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6WRGsifDqf5GpMlXkelBIk&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(13)" alt="昊天 Haotian" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">昊天 Haotian</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000ca4eac78b48334da644c69568" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>以后所有小程序都会有一个“登录”页面了， 这绝对不是你们想要的 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 2
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月20日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479368_148" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw78v6qsm3POfLe8NTsSQqbc&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(14)" alt="，" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">，</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_00086060d90bd0c548a645af8568" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>那这个第三方session被其他人拿到，是不是同样可以冒充用户 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月20日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479378_817" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw_JfShYG-pFocHgwF7HXn-s&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0" alt="唐衡" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">唐衡</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_0000e4f4dfc9e00663a6d59ac5b8" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>问个问题，该新功能出来后是否能兼容老代码。 </p><p>以下是我用的微信推荐的登录代码，如果新功能出来后，原有的这个代码需要改动吗？ </p><p>（前面听说 <span style="  ; ; ;  ; ">wx.getUserInfo 后面会一直调用失败，这个消息是真的吗？ </span>） </p><p><br></p><table border="0" cellpadding="0" cellspacing="0" class="syntaxhighlighter nogutter js"><tbody><tr><td class="code"><div class="line number1 index0 alt2"><code class="js keyword">var </code>  <code class="js plain">getWxLoginResult =  </code><code class="js keyword">function </code>  <code class="js plain">getLoginCode(callback) { </code></div><div class="line number2 index1 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">wx.login({ </code></div><div class="line number3 index2 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">success:  </code><code class="js keyword">function </code>  <code class="js plain">(loginResult) { </code></div><div class="line number4 index3 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">wx.getUserInfo({ </code></div><div class="line number5 index4 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">success:  </code><code class="js keyword">function </code>  <code class="js plain">(userResult) { </code></div><div class="line number6 index5 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">callback( </code><code class="js keyword">null </code><code class="js plain">, { </code></div><div class="line number7 index6 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">code: loginResult.code, </code></div><div class="line number8 index7 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">encryptedData: userResult.encryptedData, </code></div><div class="line number9 index8 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">iv: userResult.iv, </code></div><div class="line number10 index9 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">userInfo: userResult.userInfo, </code></div><div class="line number11 index10 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}); </code></div><div class="line number12 index11 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}, </code></div><div class="line number13 index12 alt2">&nbsp; </div><div class="line number14 index13 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">fail:  </code><code class="js keyword">function </code>  <code class="js plain">(userError) { </code></div><div class="line number15 index14 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js keyword">var </code>  <code class="js plain">error =  </code><code class="js keyword">new </code>  <code class="js plain">LoginError(constants.ERR_WX_GET_USER_INFO,  </code><code class="js string">'获取微信用户信息失败，请检查网络状态' </code><code class="js plain">); </code></div><div class="line number16 index15 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">error.detail = userError; </code></div><div class="line number17 index16 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">callback(error,  </code><code class="js keyword">null </code><code class="js plain">); </code></div><div class="line number18 index17 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}, </code></div><div class="line number19 index18 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}); </code></div><div class="line number20 index19 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}, </code></div><div class="line number21 index20 alt2">&nbsp; </div><div class="line number22 index21 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">fail:  </code><code class="js keyword">function </code>  <code class="js plain">(loginError) { </code></div><div class="line number23 index22 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js keyword">var </code>  <code class="js plain">error =  </code><code class="js keyword">new </code>  <code class="js plain">LoginError(constants.ERR_WX_LOGIN_FAILED,  </code><code class="js string">'微信登录失败，请检查网络状态' </code><code class="js plain">); </code></div><div class="line number24 index23 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">error.detail = loginError; </code></div><div class="line number25 index24 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">callback(error,  </code><code class="js keyword">null </code><code class="js plain">); </code></div><div class="line number26 index25 alt1"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}, </code></div><div class="line number27 index26 alt2"><code class="js spaces">&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="js plain">}); </code></div><div class="line number28 index27 alt1"><code class="js plain">}; </code></div></td></tr></tbody></table><p><br></p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 2</a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月22日</span></span></div> <div class="post_comment_reply_area"><div class="post_comment_area"><ul class="post_comment_list"><li class="js_post_comment_item post_comment_item" article-author-openid=""><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw6DytH2NG_CP645Kaj3YzZI&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(15)" alt="Kigare" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">Kigare</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000a4eb1510798602cc6c930e5c0" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content">方法不用改吧. 我的没改, 直接用button调用你上面的wx.login去授权就好了. 就多了一个手动获取授权的页面</div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 0
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">05月14日</span></span></div> <!----></li></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r">回复</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor" style="display: none;"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479399_274" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw0FyuBPegyGJeGo5iW9emBg&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(16)" alt="有人@你" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">有人@你</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_000e6472414d001082a605f4b568" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>反正我觉得整个业务流程，让人最蛋疼的东西就是这个“登录”了（除了很多BUG外）。既然提供了Login处理接口，还需要服务端，通过此接口获取出来的数据，进行生成一个第三方凭证，客户端还要定期检测维护这个状态。如果直接使用自定义的登录态的话，有些API的使用，又要通过 wx.checkSessison 来检测是否过期。。。 </p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 1
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月23日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479425_388" class="post_comment_editor_wrp"></div></div></div></div></div></li><li class="js_post_comment_item post_comment_item" article-author-openid="oCJUsw5ag-P03fgiCrGi5fvSD3YE"><a href="https://developers.weixin.qq.com/selfcenter?action=get_blog&amp;openid=oCJUsw0MJuMagdsosZA2DbB6k_w0&amp;lang=zh_CN" target="_blank" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(17)" alt="SetNull" class="post_comment_owner_avatar"> <strong data-component-identifier="replybox__nick_name" class="post_comment_owner_nickname">SetNull</strong></a> <!----> <!----> <!----> <!----> <div class="post_comment_editor_area" style="display: none;"><div class="post_comment_content post_editor_box"><div id="js_editor_00060c2c4ac1e8b8a0a62b27956c" class="post_comment_editor_wrp"></div></div></div> <div class="post_comment_content"><div><p>看看谷歌做的动态权限，再看看这里~呵呵 这种控件做法耦合性不考虑了？ <br></p></div></div> <div class="post_comment_info"><span class="post_comment_opr"><a data-component-identifier="comment-like" class="post_opr_meta "><i class="icon_post_opr like"></i>赞同 2
        </a> <a data-component-identifier="comment-dislike" class="post_opr_meta "><i class="icon_post_opr dislike"></i>没有帮助
        </a> <a class="js_comment post_opr_meta"><i class="icon_post_opr discuss"></i>回复 </a> <!----> <!----> <!----></span> <span class="post_comment_pos"><!----> <span class="post_comment_time">04月25日</span></span></div> <div class="post_comment_reply_area" style="display: none;"><div class="post_comment_area"><ul class="post_comment_list"></ul> <!----> <!----> <!----> <div class="post_reply_fold_opr"><a href="javascript:;" class="btn btn_default r r" style="display: none;">收起回复框</a></div> <div class="post_comment_editor_area post_comment_item with_post_editor"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299479441_61" class="post_comment_editor_wrp"></div></div></div></div></div></li></ul> <div class="pagination_wrp"><div class="pagination" id="wxPagebar_1528299479496">
    <span class="page_nav_area">
        <a href="javascript:void(0);" class="btn page_first" style="display: none;"></a>
        <a href="javascript:void(0);" class="btn page_prev" style="display: none;"><i class="arrow"></i></a>
        
            <span class="page_num">
                <label>1</label>
                <span class="num_gap">/</span>
                <label>6</label>
            </span>
        
        <a href="javascript:void(0);" class="btn page_next"><i class="arrow"></i></a>
        <a href="javascript:void(0);" class="btn page_last" style="display: none;"></a>            
    </span>
    
    <span class="goto_area">
        <input type="text">
        <a href="javascript:void(0);" class="btn page_go">跳转</a>
    </span>
    
</div>
</div> <!----> <!----> <!----> <div class="post_comment_editor_area post_comment_item with_post_editor" style="display: none;"><a href="javascript:;" class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(4)" class="post_comment_owner_avatar"> <strong data-component-identifier="commentlist__nick_name" class="post_comment_owner_nickname"></strong></a> <!----> <div class="post_comment_content post_editor_box"><div id="1528299478325_462" class="post_comment_editor_wrp"></div></div></div></div> <div class="post_comment_editor_area post_comment_item with_post_editor with_post_login_tips"><span class="post_comment_owner"><img src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/0(18)" class="post_comment_owner_avatar"></span> <div class="post_login_placeholder"><div class="post_comment_editor_wrp"><div id="edui1_toolbarbox" class="edui-editor-toolbarbox show-edui-more edui-default"><div id="edui1_toolbarboxouter" class="edui-editor-toolbarboxouter edui-default"><div class="edui-editor-toolbarboxinner edui-default"><div id="js_toolbar_0" class="edui-toolbar  edui-toolbar-primary edui-default webuploader-container" style="user-select: none;"><div id="edui2" class="edui-box edui-button edui-for-source edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui3" class="edui-box edui-separator  edui-default"></div> <div id="edui4" class="edui-box edui-button edui-for-bold edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui5" class="edui-box edui-button edui-for-italic edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui6" class="edui-box edui-button edui-for-underline edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui7" class="edui-box edui-separator  edui-default"></div> <div id="edui8" class="edui-box edui-button edui-for-justifyleft edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui9" class="edui-box edui-button edui-for-justifycenter edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui10" class="edui-box edui-button edui-for-justifyright edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui11" class="edui-box edui-separator  edui-default"></div> <div id="edui12" class="edui-box edui-menubutton edui-for-insertorderedlist edui-default"><div class="edui-menubutton-body edui-default"><div id="edui12_button_body" class="edui-box edui-button-body edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div class="edui-box edui-arrow edui-default"></div></div></div> <div id="edui19" class="edui-box edui-menubutton edui-for-insertunorderedlist edui-default"><div class="edui-menubutton-body edui-default"><div id="edui19_button_body" class="edui-box edui-button-body edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div class="edui-box edui-arrow edui-default"></div></div></div> <div id="edui24" class="edui-box edui-separator  edui-default"></div> <div id="edui25" class="edui-box edui-button edui-for-blockquote edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui26" class="edui-box edui-button edui-for-link edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui27" class="edui-box edui-button edui-for-unlink edui-default"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui28" class="edui-box edui-separator  edui-default"></div> <div id="edui29" class="edui-box edui-button edui-for-uploadimg edui-default webuploader-pick"><div class="edui-box edui-icon edui-default"></div></div> <div id="edui30" class="edui-box edui-button edui-for-insertcode edui-default"><div class="edui-box edui-icon edui-default"></div></div></div></div></div></div></div> <div class="post_comment_editor_mask"></div> <div class="post_login_tips_area"><div class="post_login_tips">
                                    暂无评论权限，请用开发者微信号登录后发表评论。
                            </div></div></div></div> <div></div></div></div>
        </div>
        <script type="text/javascript">
        
        document.getElementById('body').style.minHeight = document.documentElement.clientHeight-123+"px"
        window.onresize = function() {
            document.getElementById('body').style.minHeight = document.documentElement.clientHeight-123+"px"
        }
        </script>
        <div class="foot blur_row page_full" id="footer">
            <ul class="links ft"> 
	   
		<li class="links_item"><a href="http://www.tencent.com/zh-cn/index.shtml" target="_blank">关于腾讯</a></li>
		<li class="links_item"><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/index.html" target="_blank">文档中心</a></li>
		<li class="links_item"><a href="http://mp.weixin.qq.com/cgi-bin/opshowpage?action=dispelinfo&amp;lang=zh_CN&amp;begin=1&amp;count=9" target="_blank">辟谣中心</a></li>
		<li class="links_item"><a href="http://kf.qq.com/product/wx_xcx.html" target="_blank">客服中心</a></li>
						<li class="links_item"><a href="mailto:weixinmp@qq.com" target="_blank">联系邮箱</a></li>
					<li class="links_item"><a href="https://developers.weixin.qq.com/acct/infringementlogin?action=getkey&amp;lang=zh_CN" target="_blank">侵权投诉</a></li>
				<li class="links_item"><p class="copyright">Copyright © 2012-2018 Tencent. All Rights Reserved.</p></li>
</ul>
<script type="text/javascript">
    
    window._points&&(window._points[2]=+new Date());
</script>
        </div>

        <script type="text/javascript">var MODULES = {'tpl/top.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/top.html318d1d.js','tpl/biz_web/ui/dateRange.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/biz_web/ui/dateRange.html318d1d.js','tpl/biz_web/ui/checkbox.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/biz_web/ui/checkbox.html318d1d.js','tpl/biz_web/ui/timeRange.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/biz_web/ui/timeRange.html318d1d.js','tpl/biz_web/ui/dropdown.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/biz_web/ui/dropdown.html318d1d.js','tpl/biz_web/ui/multiupload.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/biz_web/ui/multiupload.html.js','tpl/pagebar.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/pagebar.html318d1d.js','tpl/uploader.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/uploader.html318d1d.js','tpl/tooltip.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/tooltip.html318d1d.js','tpl/mpEditor/layout.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/layout.html3abe3b.js','tpl/mpEditor/comment_layout.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/comment_layout.html3e0af8.js','tpl/mpEditor/plugin/insertcode_dialog.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/plugin/insertcode_dialog.html3793d0.js','tpl/mpEditor/plugin/externalLink_del_popup.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/plugin/externalLink_del_popup.html3793d0.js','tpl/mpEditor/plugin/img_popup.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/plugin/img_popup.html3793d0.js','tpl/mpEditor/plugin/link_popup.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/plugin/link_popup.html3793d0.js','tpl/mpEditor/plugin/link_dialog.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/mpEditor/plugin/link_dialog.html3793d0.js','tpl/noticeBox.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/noticeBox.html318d1d.js','tpl/dialog.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/dialog.html318d1d.js','tpl/popup.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/popup.html318d1d.js','tpl/popover.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/popover.html318d1d.js','biz_web/ui/dateRange.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/dateRange318d1d.js','biz_web/widget/date_range.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/biz_web/widget/date_range3abe3b.css','.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/.js','biz_web/ui/map.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/map318d1d.js','biz_web/ui/checkbox.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/checkbox318d1d.js','biz_web/ui/jquery.scrollbar.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/jquery.scrollbar318d1d.js','biz_web/widget/jquery.scrollbar.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/biz_web/widget/jquery.scrollbar3793d0.css','biz_web/ui/dropdown.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/dropdown318d1d.js','biz_web/widget/dropdown.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/biz_web/widget/dropdown3abe3b.css','biz_web/ui/input/lentips.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/input/lentips318d1d.js','biz_web/ui/input/targetips.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/ui/input/targetips318d1d.js','biz_web/lib/soundmanager2.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/soundmanager2318d1d.js','biz_web/lib/audiojs.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/audiojs318d1d.js','biz_web/lib/highcharts-v4.2.1.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/highcharts-v4.2.1318d1d.js','biz_web/lib/webuploader.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader318d1d.js','biz_web/lib/webuploader/base.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/base318d1d.js','biz_web/lib/webuploader/widgets/filepicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/filepicker318d1d.js','biz_web/lib/webuploader/widgets/queue.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/queue318d1d.js','biz_web/lib/webuploader/widgets/runtime.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/runtime318d1d.js','biz_web/lib/webuploader/widgets/upload.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/upload318d1d.js','biz_web/lib/webuploader/widgets/validator.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/validator318d1d.js','biz_web/lib/webuploader/widgets/image.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/image318d1d.js','biz_web/lib/webuploader/runtime/html5/blob.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/blob318d1d.js','biz_web/lib/webuploader/runtime/html5/filepicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/filepicker318d1d.js','biz_web/lib/webuploader/runtime/html5/imagemeta/exif.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/imagemeta/exif318d1d.js','biz_web/lib/webuploader/runtime/html5/transport.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/transport318d1d.js','biz_web/lib/webuploader/runtime/html5/image.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/image318d1d.js','biz_web/lib/webuploader/runtime/flash/filepicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/flash/filepicker318d1d.js','biz_web/lib/webuploader/runtime/flash/transport.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/flash/transport318d1d.js','biz_web/lib/webuploader/runtime/flash/blob.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/flash/blob318d1d.js','biz_web/lib/webuploader/runtime/flash/image.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/flash/image318d1d.js','biz_web/lib/highcharts.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/highcharts318d1d.js','biz_web/lib/video.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/video318d1d.js','biz_web/lib/spin.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/spin318d1d.js','biz_web/lib/raphael-min.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/raphael-min318d1d.js','eve.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/eve.js','biz_web/lib/swfobject.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/swfobject318d1d.js','biz_web/lib/store.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/store318d1d.js','biz_web/lib/json.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/json318d1d.js','biz_web/lib/uploadify.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/uploadify318d1d.js','biz_web/lib/highcharts-more-v4.2.4.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/highcharts-more-v4.2.4318d1d.js','biz_web/lib/webuploader/lib/filepicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/lib/filepicker318d1d.js','biz_web/lib/webuploader/runtime/client.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/client318d1d.js','biz_web/lib/webuploader/lib/file.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/lib/file318d1d.js','biz_web/lib/webuploader/lib/image.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/lib/image318d1d.js','biz_web/lib/webuploader/lib/blob.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/lib/blob318d1d.js','biz_web/lib/webuploader/lib/transport.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/lib/transport318d1d.js','biz_web/lib/webuploader/mediator.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/mediator318d1d.js','biz_web/lib/webuploader/uploader.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/uploader318d1d.js','biz_web/lib/webuploader/file.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/file318d1d.js','biz_web/lib/webuploader/widgets/widget.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/widgets/widget318d1d.js','biz_web/lib/webuploader/runtime/runtime.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/runtime318d1d.js','biz_web/lib/webuploader/queue.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/queue318d1d.js','biz_web/lib/webuploader/dollar-third.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/dollar-third318d1d.js','biz_web/lib/webuploader/promise.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/promise318d1d.js','biz_web/lib/webuploader/runtime/html5/runtime.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/runtime318d1d.js','biz_web/lib/webuploader/runtime/html5/util.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/util318d1d.js','biz_web/lib/webuploader/runtime/compbase.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/compbase318d1d.js','biz_web/lib/webuploader/runtime/html5/jpegencoder.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/jpegencoder318d1d.js','biz_web/lib/webuploader/runtime/html5/imagemeta.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/html5/imagemeta318d1d.js','biz_web/lib/webuploader/runtime/flash/runtime.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/runtime/flash/runtime318d1d.js','biz_web/lib/webuploader/dollar-builtin.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/lib/webuploader/dollar-builtin318d1d.js','biz_web/utils/Piper.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/utils/Piper318d1d.js','biz_web/utils/upload.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/utils/upload32910e.js','widget/upload.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/upload3ca8db.css','common/wx/dialog.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/dialog3dccb1.js','common/wx/Tips.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/Tips3dccb1.js','biz_web/utils/multiupload.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_web/utils/multiupload.js','common/wx/preview.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/preview.js','discussion/fetch_access_token.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/fetch_access_token3dccb1.js','discussion/login.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/login3dccb1.js','discussion/edit.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/edit3dccb1.js','common/qq/Class.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/Class318d1d.js','common/wx/inputCounter.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/inputCounter3dccb1.js','common/wx/mpEditor/plugin/filter.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/filter3dccb1.js','common/wx/mpEditor/plugin/link.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/link3dccb1.js','common/wx/mpEditor/plugin/source.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/source3dccb1.js','common/wx/mpEditor/plugin/uploadimg.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/uploadimg3dccb1.js','common/wx/mpEditor/plugin/insertcode.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/insertcode3dccb1.js','common/wx/mpEditor/plugin/unlink.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/unlink3dccb1.js','common/wx/mpEditor/editor.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/editor3dccb1.js','discussion/article_list.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/article_list3e0af8.js','search/request.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/search/request3e0af8.js','discussion/index.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/index3e41ec.js','common/wx/time.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/time3dccb1.js','common/wx/pagebar.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/pagebar3dccb1.js','discussion/post.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/post3dccb1.js','common/wx/top.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/top3dccb1.js','discussion/detail.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/detail3e0af8.js','common/wx/cgiRetCode.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/cgiRetCode3dccb1.js','common/wx/popover.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/popover3dccb1.js','discussion/report.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/report3dccb1.js','discussion/blog_cgi.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/blog_cgi3e0af8.js','discussion/draft.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/draft3dccb1.js','biz_common/moment.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/moment318d1d.js','biz_common/jquery.validate.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/jquery.validate318d1d.js','common/wx/mpEditor/plugin/remoteimg.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/remoteimg3dccb1.js','biz_common/utils/monitor.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/monitor318d1d.js','discussion/notice.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/discussion/notice3dccb1.js','common/wx/Cgi.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/Cgi3dccb1.js','search/header_box.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/search/header_box3e0af8.js','search/index.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/search/index3e0af8.js','biz_common/utils/string/html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/string/html318d1d.js','biz_common/dom/attr.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/dom/attr318d1d.js','biz_common/dom/event.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/dom/event318d1d.js','biz_common/dom/class.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/dom/class318d1d.js','biz_common/ui/imgonepx.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/ui/imgonepx318d1d.js','biz_common/virtual-template.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/virtual-template318d1d.js','biz_common/aes.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/aes318d1d.js','biz_common/utils/huatuo.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/huatuo318d1d.js','biz_common/utils/respTypes.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/respTypes318d1d.js','biz_common/utils/string/emoji.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/string/emoji318d1d.js','biz_common/utils/string/jsonDeepHtmldecode.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/string/jsonDeepHtmldecode.js','biz_common/utils/url/parse.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/url/parse318d1d.js','biz_common/utils/spin.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/spin318d1d.js','biz_common/utils/norefererimg.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/norefererimg318d1d.js','biz_common/utils/sha1.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/sha1318d1d.js','biz_common/utils/asyncJs.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/asyncJs318d1d.js','biz_common/utils/wxgspeedsdk.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/wxgspeedsdk318d1d.js','biz_common/utils/cookie.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/cookie318d1d.js','biz_common/utils/http.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/http318d1d.js','biz_common/utils/geolocation.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/geolocation318d1d.js','biz_common/utils/report.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/utils/report318d1d.js','biz_common/xss.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/xss318d1d.js','biz_common/jquery-1.9.1.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/jquery-1.9.1318d1d.js','biz_common/tmpl.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/tmpl318d1d.js','biz_common/base64.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/base64.js','biz_common/underscore.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/underscore318d1d.js','biz_common/jquery.ui/jquery.ui.sortable.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/jquery.ui/jquery.ui.sortable318d1d.js','biz_common/jquery.ui/jquery.ui.draggable.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/jquery.ui/jquery.ui.draggable318d1d.js','biz_common/log/jserr.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/log/jserr318d1d.js','biz_common/cookie.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/cookie318d1d.js','biz_common/test/respTypesTest/index.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/test/respTypesTest/index.html318d1d.js','biz_common/template-2.0.1-cmd.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/template-2.0.1-cmd318d1d.js','biz_common/jquery-2.1.4.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/jquery-2.1.4318d1d.js','biz_common/framework/localforage.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/framework/localforage318d1d.js','promise.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/promise.js','biz_common/framework/drivers/indexeddb.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/framework/drivers/indexeddb.js','biz_common/framework/drivers/localstorage.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/framework/drivers/localstorage.js','biz_common/framework/drivers/websql.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/biz_common/framework/drivers/websql.js','common/wx/widgetBridge.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/widgetBridge3dccb1.js','common/wx/noticeBox.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/noticeBox3dccb1.js','common/wx/stepPopup.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/stepPopup3dccb1.js','common/wx/Step.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/Step3dccb1.js','common/wx/popup.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/popup3dccb1.js','common/wx/qrcheck_msg.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/qrcheck_msg3dccb1.js','widget/processor_bar.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/processor_bar3ca8db.css','tpl/step.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/step.html.js','common/wx/qrcheck.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/qrcheck3dccb1.js','widget/qrcheck.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/qrcheck3793d0.css','tpl/qrcheck/qrcode.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/qrcheck/qrcode.html.js','tpl/qrcheck/popup.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/qrcheck/popup.html.js','common/wx/cgiReport.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/cgiReport3dccb1.js','common/wx/region.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/region3dccb1.js','widget/pagination.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/pagination3ca8db.css','common/wx/tooltips.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/tooltips3dccb1.js','tpl/tooltips.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/tooltips.html.js','common/wx/upload.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/upload3dccb1.js','common/wx/mpEditor/editor_all_min.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/editor_all_min3dccb1.js','common/lib/colorpicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/colorpicker3793d0.js','widget/ueditor_new/themes/default/ueditor.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/ueditor_new/themes/default/ueditor3ca8db.css','widget/ueditor_new/themes/default/css/ueditor.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/ueditor_new/themes/default/css/ueditor3793d0.css','widget/tooltip.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/tooltip3ca8db.css','common/wx/mpEditor/contextmenu.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/contextmenu3dccb1.js','common/wx/mpEditor/plugin/popup.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/popup3dccb1.js','common/wx/mpEditor/plugin/img.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/plugin/img3dccb1.js','common/wx/media/imageDialog.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/media/imageDialog.js','common/lib/codemirror.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/codemirror3793d0.js','common/lib/shCode.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/shCode3793d0.js','common/wx/mpEditor/zh_CN.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/zh_CN3dccb1.js','common/wx/mpEditor/editor_config.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/mpEditor/editor_config3dccb1.js','common/wx/overseasList.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/overseasList3dccb1.js','common/wx/stopMultiRequest.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/stopMultiRequest3dccb1.js','common/wx/verifycode.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/wx/verifycode3dccb1.js','widget/verifycode.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/verifycode3ca8db.css','tpl/verifycode.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/verifycode.html.js','common/qq/events.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/events318d1d.js','common/qq/mask.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/mask318d1d.js','common/lib/MockJax.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/MockJax3793d0.js','common/lib/redux/redux.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux3793d0.js','common/lib/redux/immutable.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/immutable3793d0.js','common/lib/redux/redux-immutable/combineReducers.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-immutable/combineReducers3793d0.js','common/lib/redux/redux-immutable/utilities/index.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-immutable/utilities/index3793d0.js','common/lib/redux/redux-immutable/utilities/getStateName.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-immutable/utilities/getStateName3793d0.js','common/lib/redux/redux-immutable/utilities/getUnexpectedInvocationParameterMessage.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-immutable/utilities/getUnexpectedInvocationParameterMessage3793d0.js','common/lib/redux/redux-immutable/utilities/validateNextState.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-immutable/utilities/validateNextState3793d0.js','common/lib/redux/redux-vComponent.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/redux/redux-vComponent3793d0.js','common/lib/vComponent.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/vComponent3793d0.js','common/lib/datepicker.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/datepicker3793d0.js','widget/datepicker.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/datepicker3ca8db.css','common/lib/virtual-template.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/lib/virtual-template3793d0.js','widget/colorpicker/colorpicker.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/colorpicker/colorpicker3ca8db.css','widget/ueditor_new/codemirror/codemirror.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/ueditor_new/codemirror/codemirror3ca8db.css','common/utils/events.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/utils/events318d1d.js','common/utils/queryString.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/utils/queryString318d1d.js','common/utils/Class.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/utils/Class318d1d.js','common/jquery.plugin/serializeObject.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/jquery.plugin/serializeObject318d1d.js','common/qq/queryString.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/queryString318d1d.js','common/qq/jquery.plugin/ZeroClipboard.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/jquery.plugin/ZeroClipboard318d1d.js','common/qq/jquery.plugin/tab.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/jquery.plugin/tab318d1d.js','tpl/tab.html.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/tpl/tab.html.js','widget/msg_tab.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/msg_tab3ca8db.css','common/qq/jquery.plugin/serializeObject.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/jquery.plugin/serializeObject318d1d.js','common/qq/url.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/url318d1d.js','common/qq/emoji.js': 'https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/js/common/qq/emoji318d1d.js','widget/emoji.css': 'https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/emoji3ca8db.css'};</script>
        <script type="text/javascript">
    try {
        window.wx ={
            version:"4.0.0",
            uin:"",
            user_type:""*1||0,
            data:{
                t:"",
                ticket:"",
                lang:'zh_CN',
                param:["&token=",'&lang=zh_CN'].join(""),
                uin:"",
                uin_base64:"",
                user_name:"",
                nick_name:"",
                time:""||new Date().getTime()/1000
            },
            path:{
                video : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/video-js318d1d.swf",
                audio : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/audiojs318d1d.swf",
                uploadify : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/uploadify318d1d.swf",
                webuploader : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/webuploader318d1d.swf",
                zoom : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/zoom318d1d.swf",
                zeroClipboard_new : "https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/ZeroClipboard_new318d1d.swf",
                rimgcrop : "https://res.wx.qq.com/wxopenforumres/htmledition/images/cut-round318d1d.gif"
            },
            acl:{

            },
            events:{}
        };
    } catch (error) {
        if(error&&error.stack){
            error.stack="[tryCatch][layout_js]" + error.stack;
        }
        BJ_REPORT&&BJ_REPORT.report&&BJ_REPORT.report(error);
        var orgOnerror = window.onerror;
        window.onerror = function() {};
        setTimeout(function() {
            window.onerror = orgOnerror;
        }, 50);
        throw error;
    }
</script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/sea318d1d.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/lib318d1d.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/wx3dccb1.js"></script>

<script type="text/javascript">

</script>


        
<script type="text/javascript">define('widget/colorpicker/colorpicker.css', [], function(){return null;});
define('biz_web/widget/dropdown.css', [], function(){return null;});
define('widget/upload.css', [], function(){return null;});
define('widget/ueditor_new/codemirror/codemirror.css', [], function(){return null;});
define('widget/tooltip.css', [], function(){return null;});
define('widget/ueditor_new/themes/default/css/ueditor.css', [], function(){return null;});
define('widget/ueditor_new/themes/default/ueditor.css', [], function(){return null;});
define('widget/pagination.css', [], function(){return null;});</script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/events318d1d.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/jquery.ui.draggable318d1d.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/img_popup.html3793d0.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/editor.container3e0af8.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/filter3dccb1.js"></script>
<script type="text/javascript" src="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/detail3e0af8.js"></script>
<script v-pre="" id="content_tpl" type="text/html">
<p><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">背景</span></strong><br  /></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">我们发现大部分小程序都会使用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">接口，来获取用户信息。原本设计这个接口时，我们希望开发者在真正需要用户信息的情况下才去调取这个接口，但很多开发者会直接调用这个接口，导致用户在使用小程序的时候产生困扰，</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">归结起来有几点：</span></p><ul class=" list-paddingleft-2" style=" padding-left: 2.2em; max-width: 100%; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">开发者在小程序首页直接调用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">进行授权，弹框获取用户信息，会使得一部分用户点击“拒绝”按钮。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在开发者没有处理用户拒绝弹框的情况下，用户必须授权头像昵称等信息才能继续使用小程序，会导致某些用户放弃使用该小程序。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">用户没有很好的方式重新授权，尽管我们增加了</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">设置</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">页面，可以让用户选择重新授权，但很多用户并不知道可以这么操作。</span></p></li></ul><ul class=" list-paddingleft-2" style="list-style-type: none;"><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p></li></ul><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">此外，我们发现开发者默认将</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 绑定使用，这个是由于我们一开始的设计缺陷和实例代码导致的（</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">必须通过</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在后台生成</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">后才能调用）。同时，我们收到开发者的反馈，希望用户进入小程序首页便能获取到用户的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，以便识别到用户是否以前关注了同主体公众号或</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">使用过同主体的App 。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为了解决以上问题，针对获取用户信息我们更新了三个能力：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.使用组件来获取用户信息</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.若用户满足一定条件，则可以</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">用</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取到的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">直接换到</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">3.</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不需要依赖</span><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 就能调用得到数据</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">获取用户信息组件介绍</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">组件变化：</span></p><ul class=" list-paddingleft-2" style=" padding-left: 2.2em; max-width: 100%; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">open-type </code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">属性增加</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：用户点击时候会</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">触</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">发</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 事件。</span></p></li><li><p style="max-width: 100%; min-height: 1em; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">新增事件</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：当 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">open-type</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 时，用户点击会触发。可以从事件返回参数的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">detail</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 字段中获取到和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 返回参数相同的数据。</span></p></li></ul><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">示例：</span></p><pre style="max-width: 100%; line-height: 25.6px; widows: 1; unicode-bidi: embed; white-space: pre-wrap; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255); box-sizing: border-box !important; word-wrap: break-word !important;"><code class="" style="margin-right: 4px; margin-bottom: 16px; padding: 14px; max-width: 100%; word-wrap: break-word; border-top: 1px solid rgb(221, 221, 221); border-right: 1px solid rgb(221, 221, 221); border-bottom: 1px solid rgb(221, 221, 221); border-radius: 3px; font-size: 14px; font-family: Consolas, Monaco, monospace; display: block; white-space: pre; overflow-x: auto; color: rgb(248, 248, 242); background: rgb(35, 36, 31); box-sizing: border-box !important; border-left-style: none !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&lt;</span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">button</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">open-type</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">=</span><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;">&quot;getUserInfo&quot;</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"> </span><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">bindgetuserinfo</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">=</span><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(230, 219, 116); box-sizing: border-box !important; word-wrap: break-word !important;">&quot;userInfoHandler&quot;</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&gt;</span></span> Click me <span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(248, 248, 242); box-sizing: border-box !important; word-wrap: break-word !important;"><span class="" style="max-width: 100%; color: rgb(249, 38, 114); box-sizing: border-box !important; word-wrap: break-word !important;">button</span></span></span><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">&gt;</span></span></span></code></pre><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不同之处在于：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.API</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">只会弹一次框，用户拒绝授权之后，再次调用将不会弹框；</span></p><p style="margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">组件 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;"></code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">由于是用户主动触发，不受弹框次数限制，只要用户没有授权，都会再次弹框。</span></p><p><br  /></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">通过获取用户信息的组件，就可以</span><strong style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">解决用户再次授权</strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">的问题。</span></p><h3 style=" margin-top: 1.1em; margin-bottom: 1.3em; font-weight: bolder; font-size: 19px; max-width: 100% ; ; ; ; ; ; ; ; ; ; ; ; "><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">直接获取unionId</span></strong></h3><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">开发者申请</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">userinfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 授权主要为了获取 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，我们鼓励开发者在不骚扰用户的情况下合理获得</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，而仅在必要时才向用户弹窗申请使用昵称头像。为此，凡使用“获取用户信息组件”获取用户昵称头像的小程序，在满足以下全部条件时，将可以静默获得</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">：</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.在微信开放平台下存在同主体的App、公众号、小程序。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.用户关注了某个相同主体公众号，或曾经在某个相同主体App、公众号上进行过微信登录授权。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">这样可让其他同主体的<span style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">App、公众号、小程序的开发者<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">快速获得已有用户的数据</strong>。</span></span></span></p><h3 style=" margin-top: 1.1em; margin-bottom: 1.3em; font-weight: bolder; font-size: 19px; max-width: 100% ; ; ; ; ; ; ; ; ; ; ; ; "><span class="" style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"></span><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">不依赖登</span></strong><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">录的用户信息获取</span></strong></h3><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">某些工具类的轻量小程序不需要登录行为，但是也想获取用户信息，那么就可以在 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 的时候加一个参数</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">withCredentials: false</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 直接获取到用户信息，可以少一次网络请求。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; font-size: 15px; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">这样可以在不给用户弹窗授权的情况下<strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">直接展示用户的信息</strong>。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">最佳实践</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.调用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，然后从微信后端换取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，用于解密 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">返回的敏感数据。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">2.使用</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getSetting</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取用户的授权情况</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> &nbsp;1) 如果用户已经授权，直接调用 API</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">wx.getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取用户最新的信息；</span><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> &nbsp;2) 用户未授权，在界面中显示一个按钮提示用户登入，当用户点击并授权后就获取到用户的最新信息。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">3.获取到用户数据后可以进行展示或者发送给自己的后端。</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"></span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; color: rgb(68, 68, 68); font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">One More Thing</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">除了获取用户方案介绍之外，再聊一聊很多初次接触微信小程序的开发者所不容易理解的一些概念：</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">1.关于OpenId和UnionId</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">OpenId</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">是一个用户对于一个小程序／公众号的标识，开发者可以通过这个标识识别出用户。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">UnionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是一个用户对于同主体微信小程序／公众号／APP的标识，开发者需要在微信开放平台下绑定相同账号的主体。开发者可通过</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">UnionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">，实现多个小程序、公众号、甚至APP 之间的数据互通了。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">同一个用户的这两个 ID 对于同一个小程序来说是永久不变的，就算用户删了小程序，下次用户进入小程序，开发者依旧可以通过后台的记录标识出来。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; color: rgb(68, 68, 68); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;">2.关于 getUserInfo 和 login</span></strong></span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">很多开发者会把</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 捆绑调用当成登录使用，其实 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 已经可以完成登录，</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 只是获取额外的用户信息。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">在</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 获取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 后，会发送到开发者后端，开发者后端通过接口去微信后端换取到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">sessionKey</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">（现在会将 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionid</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 也一并返回）后，把自定义登录态 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">3rd_session</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">返回给前端，就已经完成登录行为了。而 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 行为是静默，不必授权的，用户不会察觉。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">getUserInfo</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 只是为了提供更优质的服务而存在，比如展示头像昵称，判断性别，开发者可通过</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">unionId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和其他公众号上已有的用户画像结合来提供历史数据。因此开发者不必在用户刚刚进入小程序的时候就强制要求授权。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">可以在官方的文档中看到</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 的最佳实践：</span></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/JpltBJ31poWJDK7SWLI8Y52j3eL3jVicRyXKjo60OsUwcHb3BGm2YKvOF45TC4yVIWMT28pJO3YBvsiaGkGdEJDQ/640?wx_fmt=jpeg" style=""><br  /></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></p><p style=" max-width: 100%; min-height: 1em; color: rgb(62, 62, 62) ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; font-size: 20px; box-sizing: border-box !important; word-wrap: break-word !important;"><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;">Q &amp; A</strong></span></span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q1: </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为什么 login 的时候不直接返回 openid，而是要用这么复杂的方式来经过后台好几层处理之后才能拿到？</span></strong></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">为了防止坏人在网络链路上做手脚，所以小程序端请求开发者服务器的的请求都需要二次验证才是可信的。因为我们采取了小程序端只给</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> ，由服务器端拿着 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">code</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和</span><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> </span></strong><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">AppSecrect</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 去微信服务器请求的方式，才会给到开发者对应的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 和用于加解密的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background-color: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key。</code></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q2: </span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">既然用户的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是永远不变的，那么开发者可以使用</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 作为用户的登录态么？</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">行，这是非常危险的行为。因为 </span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是不变的，如果有坏人拿着别人的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">openId</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 来进行请求，那么就会出现冒充的情况。所以我们建议开发者可以自己在后台生成一个拥有有效期的</span> <code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">第三方session</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">来做登录态，用户每隔一段时间都需要进行更新以保障数据的安全性。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">Q3:</span><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 是不是用户每次打开小程序都需要重新</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">？</span></strong><br style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"  /></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><strong style="max-width: 100%; box-sizing: border-box !important; word-wrap: break-word !important;"><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">A: </span></strong><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">不必，可以将登录态存入</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">storage</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">中，用户再次登录就可以拿</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">storage</code> <span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">里的登录态做正常的业务请求，只有当登录态过期了之后才需要重新</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">login</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 。这样子做一则可以减少用户等待时间，二则可以减少网络带宽。</span></p><p style=" margin-bottom: 1.4em; max-width: 100%; min-height: 1.8em ; ; ; ; ; ; ; ; ; ; ; ; ; "><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;">目前微信的</span><code style="margin-right: 4px; padding: 3px; max-width: 100%; border-width: 1px; border-style: solid; border-color: rgb(221, 221, 221); border-radius: 3px; font-size: 14px; background: rgb(246, 246, 246); box-sizing: border-box !important; word-wrap: break-word !important;">session_key</code><span style="max-width: 100%; color: rgb(102, 102, 102); font-size: 15px; box-sizing: border-box !important; word-wrap: break-word !important;"> 有效期是三天，所以建议开发者设置的登录态有效期要小于这个值。</span></p><p><br  /></p></script>

<script type="text/javascript">
    wx.cgiData = {
        docid : '000c2424654c40bd9c960e71e5b009'||"",
        token: ''||"",
        headimg: ''||"",
         resolve_status : '0'*1||0,         update_time : '1526282806'*1||"1523501241"*1||0,
        create_time : "1523501241"*1||0,
        comment_lvl : ""*1||0,
        startPage : 1,
        blog_category : '512'*1||0,
        blog_attr : '36'*1||0,
        ext_link : ''*1||0,
        visit_num: '13252'*1||0,
        appmsg_data : {
            docid : '000c2424654c40bd9c960e71e5b009'||"",
        },
        highline : "",
        openid : '',
        hasAnswered: Boolean(''*1||0),
        totalContentComment: (parseInt('') * 1) || 0,
        official_mark : "0"*1||0,
        is_owner : "0"*1||0,
        is_recommend: !!"", 
        readme: "" || "", 
        github_url: "" || "", 
        upvote: parseInt('0'),
        is_upvote: parseInt(''),
        is_official_user: Boolean(),
    };

    wx.EditorRes = {
        "themes/iframe" : "https://res.wx.qq.com/wxopenforumres/htmledition/style/widget/ueditor_new/themes/iframe3ca8db.css",
        "themes/default/ueditor" : "",
        "themes/default/css/ueditor" : ""
    };

    seajs.use("discussion/detail.js");
</script>

        <script type="text/javascript">

seajs.use("search/header_box.js");
</script>
        
        
        
	



<div class="scale_tips" id="zoom_tips" style="display:none;">
<div class="scale_tips_inner">
<i class="icon_scale_tips"></i>
<p class="scale_tips_content"><span id="zoom_msg"></span><a href="javascript:;" id="zoom_prompt">不再提示</a></p>
</div>
</div><div style="position: absolute; right: 0px; bottom: 0px; display: none;"><object type="application/x-shockwave-flash" data="./小程序•小故事(4)——获取用户信息 _ 微信公众平台 开发者社区_files/zoom318d1d.swf" width="10" height="10" id="ZoomFlash"><param name="movie" value="https://res.wx.qq.com/wxopenforumres/zh_CN/htmledition/plprecorder/biz_web/zoom318d1d.swf"><param name="allowscriptaccess" value="always"><param name="wmode" value="transparent"><param name="scale" value="noScale"></object></div></body><style type="text/css" id="49927220377"></style></html>